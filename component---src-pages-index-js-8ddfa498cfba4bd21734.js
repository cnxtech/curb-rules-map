(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{155:function(e,a,t){"use strict";t.r(a);var n=t(40),i=t.n(n),l=t(8),r=t.n(l),s=t(0),o=t.n(s),c=t(157),m=t(163),d=t.n(m),u=(t(164),t(165)),h=t.n(u);function g(e){for(var a=["00","30"],t=[],n=0;n<24;n++)for(var i=0;i<a.length;i++)n<10?t.push("0"+n+":"+a[i]):t.push(n+":"+a[i]);var l=t.map(function(e){return o.a.createElement("option",{key:e,value:e},e)});return o.a.createElement("div",{className:"inline-block mr12"},o.a.createElement("div",{className:"select-container"},o.a.createElement("select",{onChange:e.handleTimeChange,value:e.timeValue,className:"select select--border-darken10"},l),o.a.createElement("div",{className:"select-arrow"})))}function y(e){var a=[{day_num:1,day_name:"Monday"},{day_num:2,day_name:"Tuesday"},{day_num:3,day_name:"Wednesday"},{day_num:4,day_name:"Thursday"},{day_num:5,day_name:"Friday"},{day_num:6,day_name:"Saturday"},{day_num:7,day_name:"Sunday"}].map(function(e){return o.a.createElement("option",{key:e.day_num,value:e.day_num},e.day_name)});return o.a.createElement("div",{className:"inline-block mr12"},o.a.createElement("div",{className:"select-container"},o.a.createElement("select",{onChange:e.handleDayChange,value:e.dayValue,className:"select select--border-darken10"},a),o.a.createElement("div",{className:"select-arrow"})))}function p(e){return o.a.createElement("div",{className:"left toggle-group mt12 border border--2 border--white bg-white shadow-darken10"},["Parking Class","Parking Rate"].map(function(a){return o.a.createElement("label",{key:a,className:"toggle-container"},o.a.createElement("input",{onChange:e.handleViewChange,checked:e.checkedValue===a,value:a,name:"toggle",type:"radio"}),o.a.createElement("div",{className:"toggle toggle--active-darken75 toggle--darken25"},a))}))}function v(e){var a=null;return a=(e.rules,""),o.a.createElement("div",null,o.a.createElement("h4",null,a))}var f=function(e){return o.a.createElement("div",{className:h.a.container},o.a.createElement("div",{className:"prose"},o.a.createElement("h3",null,"Parking Rules"),o.a.createElement("p",{className:"txt-s"},"Click on the filters below to see parking classes and rates in Calgary"),o.a.createElement(y,{dayValue:e.day,handleDayChange:e.onDayChange}),o.a.createElement(g,{timeValue:e.time,handleTimeChange:e.onTimeChange}),o.a.createElement(p,{checkedValue:e.view,handleViewChange:e.onViewChange}),o.a.createElement(v,{rules:e.viewcontext})))};d.a.accessToken="pk.eyJ1Ijoic2FhZGlxbSIsImEiOiJjamJpMXcxa3AyMG9zMzNyNmdxNDlneGRvIn0.wjlI8r1S_-xxtq2d-W5qPA";var w=function(e){function a(a){var t;return(t=e.call(this,a)||this).state={TimeValue:"10:00",DayValue:1,SelectedView:"Parking Rate"},t.handleTimeChange=t.handleTimeChange.bind(i()(t)),t.handleDayChange=t.handleDayChange.bind(i()(t)),t.handleViewChange=t.handleViewChange.bind(i()(t)),t}r()(a,e);var t=a.prototype;return t.componentDidMount=function(){var e=this;this.map=new d.a.Map({container:this.mapContainer,style:"mapbox://styles/saadiqm/cjbjougmt08z72rsa7me1duoi",center:[-114.0708,51.0486],zoom:15});var a=function(e){return{type:"exponential",base:2,stops:[[10,e*Math.pow(2,-6)],[16,e*Math.pow(2,0)]]}};this.map.on("load",function(){var t="https://pg7x2ae618.execute-api.us-west-2.amazonaws.com/dev/parking/rules?start="+e.state.TimeValue+"&day="+e.state.DayValue;e.map.addSource("Curbs",{type:"geojson",data:t}),e.map.addLayer({id:"Parking Class Right",type:"line",source:"Curbs",layout:{visibility:"none"},paint:{"line-color":["match",["get","class",["get","who",["get","restrictions"]]],"Passenger Vehicle","#cd41f4","Taxi","red","Loading","yellow","Calgary Transit Access","orange","yellow"],"line-width":a(12),"line-offset":a(15),"line-opacity":.7},filter:["all",["match",["get","side"],"right",!0,!1],["match",["get","activity",["get","what",["get","restrictions"]]],"park",!0,!1]]}),e.map.addLayer({id:"Parking Class Left",type:"line",source:"Curbs",paint:{"line-color":["match",["get","class",["get","who",["get","restrictions"]]],"Passenger Vehicle","#cd41f4","Taxi","red","Loading","green","Calgary Transit Access","orange","yellow"],"line-width":a(12),"line-offset":a(-15),"line-opacity":.7},filter:["all",["match",["get","side"],"left",!0,!1],["match",["get","activity",["get","what",["get","restrictions"]]],"park",!0,!1]]}),e.map.addLayer({id:"Parking Rate Right",type:"line",source:"Curbs",layout:{visibility:"none"},paint:{"line-color":["interpolate",["linear"],["*",["/",["get","rate",["get","payment",["get","restrictions"]]],["number",["get","interval",["get","payment",["get","restrictions"]]],1]],60],1,"#a417d3",3,"#d18417",4.5,"#ffff00"],"line-width":a(12),"line-offset":a(15),"line-opacity":.7},filter:["all",["match",["get","side"],"right",!0,!1],["match",["get","activity",["get","what",["get","restrictions"]]],"park",!0,!1]]}),e.map.addLayer({id:"Parking Rate Left",type:"line",source:"Curbs",layout:{visibility:"none"},paint:{"line-color":["interpolate",["linear"],["*",["/",["get","rate",["get","payment",["get","restrictions"]]],["number",["get","interval",["get","payment",["get","restrictions"]]],1]],60],1,"#a417d3",3,"#d18417",4.5,"#ffff00"],"line-width":a(12),"line-offset":a(-15),"line-opacity":.7},filter:["all",["match",["get","side"],"left",!0,!1],["match",["get","activity",["get","what",["get","restrictions"]]],"park",!0,!1]]}),e.map.setLayoutProperty(e.state.SelectedView+" Right","visibility","visible"),e.map.setLayoutProperty(e.state.SelectedView+" Left","visibility","visible")})},t.handleTimeChange=function(e){var a=this;e.preventDefault(),this.setState({TimeValue:e.target.value},function(){var e="https://pg7x2ae618.execute-api.us-west-2.amazonaws.com/dev/parking/rules?start="+a.state.TimeValue+"&day="+a.state.DayValue;a.map.getSource("Curbs").setData(e)})},t.handleDayChange=function(e){var a=this;e.preventDefault(),this.setState({DayValue:e.target.value},function(){var e="https://pg7x2ae618.execute-api.us-west-2.amazonaws.com/dev/parking/rules?start="+a.state.TimeValue+"&day="+a.state.DayValue;a.map.getSource("Curbs").setData(e)})},t.handleViewChange=function(e){var a=this,t=this.state.SelectedView;this.setState({SelectedView:e.target.value},function(){a.map.setLayoutProperty(a.state.SelectedView+" Right","visibility","visible"),a.map.setLayoutProperty(a.state.SelectedView+" Left","visibility","visible"),a.map.setLayoutProperty(t+" Right","visibility","none"),a.map.setLayoutProperty(t+" Left","visibility","none")})},t.render=function(){var e=this;return o.a.createElement("div",null,o.a.createElement(c.Helmet,null,o.a.createElement("link",{href:"https://api.mapbox.com/mapbox-assembly/v0.23.2/assembly.min.css",rel:"stylesheet"})),o.a.createElement("div",{ref:function(a){return e.mapContainer=a},style:{position:"absolute",top:0,bottom:0,width:"100%",height:"100%"}}),o.a.createElement(f,{time:this.state.TimeValue,onTimeChange:this.handleTimeChange,day:this.state.DayValue,onDayChange:this.handleDayChange,view:this.state.SelectedView,onViewChange:this.handleViewChange,viewcontext:this.state.SelectedView}))},a}(s.Component);a.default=w}}]);
//# sourceMappingURL=component---src-pages-index-js-8ddfa498cfba4bd21734.js.map